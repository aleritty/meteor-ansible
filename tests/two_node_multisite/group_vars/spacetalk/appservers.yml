---
# first we point ansible to the git repository containing our application
app_git_repo: "git@github.com:SpaceTalk/SpaceTalk.git"
# because we are running a multisite setup on this server we need to explicitly provide a name for the configuration
# file which will be generated by ansible for this app, otherwise I'd be overwritten when deploying the other app
nginx_config_file_name: "spacetalk"
# nginx will listen for requests addressed to this domain
nginx_server_name: spacetalk.flowkey.dev
# we want nginx to enable ssl support so we set this flag
nginx_enable_ssl: yes
# we also want nginx to redirect all http request to ssl
nginx_force_ssl: yes
# when setting up SSL we need to provide the filenames for the certificates on the local fs (pick a descriptive name)
nginx_ssl_key_file_name: spacetalk.key
nginx_ssl_cert_file_name: spacetalk.pem
# we want to use spiderable
setup_phantomjs: yes
# because we serve different apps from one server we need to provide an explicit local
# path where the git repository will be cloned to (the directories will be created automatically)
app_root_dir: "/var/apps/spacetalk"
# this is where the built meteor bundles will live
app_bundle_dir: "/var/meteor_bundles/spacetalk"
# we dont want one app to be able to overwrite files of the other so we provide a group and user
passenger_user: "spacetalk-www"
passenger_group: "spacetalk-www"
# setting this to 'on' will provide the node error message and debugging information in your browser when the app crashes
# which is useful for debugging but dangerous in production (as your meteor settings will be visible to everyone)
passenger_friendly_error_pages: 'on'
# this is the path to your settings.json, relative to your app_root_dir (ie within your git repo)
meteor_settings_file: "settings.json"
meteor_env:
  # we can easily generate MONGO_URL and MONGO_OPLOG_URL from what we know already
  MONGO_URL: 'mongodb://{{ mongodb_meteor_user.username }}:{{ mongodb_meteor_user.password }}@{{groups.mongoservers[0]}}:27017/{{ mongodb_meteor_user.database }}'
  MONGO_OPLOG_URL: 'mongodb://{{ mongodb_oplog_user.username }}:{{ mongodb_oplog_user.password }}@{{groups.mongoservers[0]}}:27017/local?authSource=admin'

  ROOT_URL: "http://spacetalk.flowkey.dev"

# ssl_certificate and key are also defined here, copy and paste the plain text here)
# prefix them with a | (pipe) symbol for multi line yaml strings (http://stackoverflow.com/a/21699210/404799)
ssl_certificate: |
  -----BEGIN CERTIFICATE-----
  MIIC0DCCAbigAwIBAgIJAJJKYRYN0EJEMA0GCSqGSIb3DQEBCwUAMCAxHjAcBgNV
  BAMTFXRlbGVzY29wZS5mbG93a2V5LmRldjAeFw0xNTA2MDIxNDMwMTlaFw0yNTA1
  MzAxNDMwMTlaMCAxHjAcBgNVBAMTFXRlbGVzY29wZS5mbG93a2V5LmRldjCCASIw
  DQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAPMMs7bWNLmPaTqe08H9LRa8l41L
  kr2aUjPtAOoge1z+oXATf+fnPn30J2XwvlXR1Fo723XifMwWaqUM+FUrjZ1H8U5l
  6TVwgeoFW+Mp5dwORaE/yJZP7bUu99ObbG1FNA9yS4D8q+19wY5nci4SJ+ncWZyo
  lTg3/0MbAY/MOTi9a808VGg1aovKWyDRpHBpHzblOdIEPuzLU/cfxLJ606ti0tEI
  rd+tWDChbBwYEYxYY5g4Kgky9w9W4MdBuMiQQe4uF9eVOvNkg4k7dodF1CaHv0ze
  ZBWBcqFPpfzlRdZbQlGUk2ZrXy1i59G+Otx+e20bGaB/aNLYQmqghV/fvr8CAwEA
  AaMNMAswCQYDVR0TBAIwADANBgkqhkiG9w0BAQsFAAOCAQEAPfF6c8npZhsDRxkp
  X+UPxqKQrbQnK+CBUbqGCecBgpqLbxDvZP3Nhe2Y2j4BZ7MKae8AX3k5CwG++Yqi
  qM+chuL6vchNuysWdXmgrvRHXJ40X61ciTLMRjsCi6PDOOeBaMzFlCKNgULMsfRk
  tVoTnb85YmMFhI2w7+7Chuf9W45sbywIifioz0uNUU5aUWQqpnC2ff8IoUhPbFwQ
  JmBM0mnQVpJajtaKSgArPXS+3jTpSXH0rzOSWpDGEgoXCIzgAVxHiGkp4v8Ylf8q
  cDuuBkWswLpDv/F5KC4qGIGcB/jlrVlydcAv+He5N8e6DsKpAxUCPiIsM65lfoIV
  PNBz5A==
  -----END CERTIFICATE-----
ssl_key: |
  -----BEGIN PRIVATE KEY-----
  MIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQDzDLO21jS5j2k6
  ntPB/S0WvJeNS5K9mlIz7QDqIHtc/qFwE3/n5z599Cdl8L5V0dRaO9t14nzMFmql
  DPhVK42dR/FOZek1cIHqBVvjKeXcDkWhP8iWT+21LvfTm2xtRTQPckuA/KvtfcGO
  Z3IuEifp3FmcqJU4N/9DGwGPzDk4vWvNPFRoNWqLylsg0aRwaR825TnSBD7sy1P3
  H8SyetOrYtLRCK3frVgwoWwcGBGMWGOYOCoJMvcPVuDHQbjIkEHuLhfXlTrzZIOJ
  O3aHRdQmh79M3mQVgXKhT6X85UXWW0JRlJNma18tYufRvjrcfnttGxmgf2jS2EJq
  oIVf376/AgMBAAECggEAMieo3k4Ny00A1gv4fsuUBmEclRfHTEEQPY7m5WmWi3Yw
  MkST3HMnvi4oAy1O2b7XJ1e6zfTS8/qcPzsR8+Fs88voy9jT6ycwZ+57K8F1oZeA
  XuoepoYP85ehpJUqJtJlD9ryIcgCYpvU2WIXedJdUjEafO18/YDwuBRWmin2lPJ6
  1mzYqaa9WTZsira6lRZWgiPVto5r89eVIJny6vsNoyXJZYVs6FJaN3dPcXcfnaQX
  +QaCuYmjWxNnRLJTi8H608l+A2kKCP++RsSZ78fKwEyyBP1Q83bu6Jv6yO+gunY6
  KsAD8d6wohTk+i33lgjaAENVhfGyiENbhbn/KeJpwQKBgQD/SjJltKgcFHQ7VhHZ
  KWKWYMvi/F8kDHGCLGAYqEMI2Nq49zEh6u2WNMrU2S2iGTL+rflTDLJ98hs5i5F9
  pjW3AAIC93kESKdvf+1l3RUQprxIV1KnazClfHalz6FHswLXEtT5A+S3I8v/jNrR
  s/buaZT3LL9ckEhYqZCJWytAyQKBgQDzucnRMzj593RNWivkzDHaOSsisiGJYXUi
  lCyQAcaotT1u+GDaECw2ZwZjm4g1qb5jYSZ2rE93lhnqKlGn0x/jfHBYK8UJH085
  7FOUQQ/uIFNosULvm7RTGK2gTSwvnhpRolndIbzl9aWdQDa99itTmVfWaGhIV6bI
  pStz9O0PRwKBgQDKD1AUcAkfMJFO5bD60WbW34aBAn/LaI3vGnB1E7j7J6j2/bBF
  yEyEtwRTtBIKWyehrNHKiiI8zYP+6Bkf+o5JahgtgPKoEVl1Ryv/lB04MMCWAYfK
  O20ljn3af5yHw4hb8uverNY6nnq4qiQIFwk7axYdDa3o9cpNYuijzyVNAQKBgQDj
  uxFsO+RdDG7LaBnjaziZoxk/Dhpv93QvnywUUtSBBvgkHEjC+KGXI6TApa8cFUMk
  ML5z3IVURBhqyKgLnCYLtVZzzFILOAobIUrnF/P+mI3XIOpeYKqZilGRmwpSY/RL
  mttE2CVc6a6ZxEpiLQZG0t1UJbJrBht9F3gGnTB0OQKBgQD+tCSwnMzHbEuO4utU
  ScZy5AZ7se8hFsGS3Y7Zvv/TcwzYXhx2CimTHuS+raD2byN80bEwst1ZZPjgkAb6
  2uS8By8DX+lZ/lw7Y4QgWuVNxyAtSMCDZtP214zocHMMkPdfUVEwds0pERiAbGlM
  eOtLtDauWVD83Z/JQvE0UxPH8A==
  -----END PRIVATE KEY-----